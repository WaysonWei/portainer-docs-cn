# 更新与回滚

此功能允许您直接从Portainer升级Edge Agent部署，无需登录远程环境手动更新。

此功能目前处于测试阶段，仅适用于在Docker Standalone环境上运行的Edge Agent。

要查看当前计划的更新或安排新更新流程，从菜单展开**环境相关**，然后选择**更新与回滚**。

<figure><img src="..//assets/2.20-environments-update.gif" alt=""><figcaption></figcaption></figure>

在此您将看到待处理和已完成的更新和回滚列表。

## 安排更新

要添加新的更新计划，点击**添加更新与回滚计划**按钮，然后填写表单。

要安排更新，Portainer必须具有您希望升级的所有环境的快照。

| 字段/选项         | 概述                                                                                                                                                                                                      |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 名称              | 输入计划更新的名称。                                                                                                                                                                                    |
| 组                | 选择包含要更新的Edge设备的Edge组。您可以在[Edge组](../../user/edge/groups.md)下配置这些组。                                                                                                             |
| 版本              | 确保选择**更新**选项卡，然后从下拉菜单中选择要升级到的版本。                                                                                                                                            |
| 计划日期和时间    | <p>选择安排更新的日期和时间。<br>从2.17之前的版本升级时，此字段将不可用，升级将在创建计划后立即进行。</p>                                                                                                |
| 注册表            | 如果需要，您可以选择从中拉取更新的Portainer Agent和portainer-updater镜像的注册表。此功能在运行于隔离环境时非常有用。                                                                                   |
| Agent镜像         | 如果需要为Portainer Agent镜像使用不同的名称，可以在此指定。                                                                                                                                             |
| Updater镜像       | 如果需要为portainer-updater镜像使用不同的名称，可以在此指定。                                                                                                                                           |

<figure><img src="..//assets/2.25.0-environment-update-rollback-add.png" alt=""><figcaption></figcaption></figure>

准备就绪后，点击**创建计划**安排更新。您将返回到更新与回滚页面，可以在此查看计划更新的状态。

<figure><img src="..//assets/2.25.0-environment-update-rollback-list.png" alt=""><figcaption></figcaption></figure>

## 安排回滚

要安排更新的回滚，点击**添加更新与回滚计划**按钮，然后填写表单。

要安排回滚，Portainer必须具有您希望回滚的所有环境的快照。

| 字段/选项         | 概述                                                                                                                                                                                                           |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 名称              | 输入计划回滚的名称。                                                                                                                                                                                         |
| 组                | 选择包含要回滚的Edge设备的Edge组。您可以在[Edge组](../../user/edge/groups.md)下配置这些组。                                                                                                                  |
| 版本              | <p>确保选择<strong>回滚</strong>选项卡，然后从下拉菜单中选择要回滚到的版本。<br>仅当有多个回滚版本可用时，此下拉菜单才可用。</p>                                                                              |
| 计划日期和时间    | 选择安排回滚的日期和时间。                                                                                                                                                                                   |
| 注册表            | 如果需要，您可以选择从中拉取Portainer Agent和portainer-updater镜像的注册表。此功能在运行于隔离环境时非常有用。                                                                                               |
| Agent镜像         | 如果需要为Portainer Agent镜像使用不同的名称，可以在此指定。                                                                                                                                                  |
| Updater镜像       | 如果需要为portainer-updater镜像使用不同的名称，可以在此指定。                                                                                                                                                |

<figure><img src="..//assets/2.25.0-environment-update-rollback-add-rollback.png" alt=""><figcaption></figcaption></figure>

准备就绪后，点击**创建计划**安排回滚。您将返回到更新与回滚页面，可以在此查看计划回滚的状态。
