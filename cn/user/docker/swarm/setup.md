# 设置

**Swarm设置**部分仅对Docker Swarm环境可用。

在**设置**下，您可以对环境进行更改，启用和禁用功能及安全设置。

## 主机和文件系统

此部分配置Portainer如何与主机元素交互。

出于安全考虑，这些功能默认禁用。在启用前请确保您了解其影响。

<figure><img src="../..//assets/2.15-docker_hosts_features_config.png" alt=""><figcaption></figcaption></figure>

| 选项                                          | 概述                                                                                                                                                                         |
| ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 启用主机管理功能                 | 启用主机管理功能可让您查看集群中物理节点上的可用设备和存储，并浏览节点的文件系统。        |
| 为非管理员启用卷管理 | 启用此功能允许非管理员用户管理环境中的卷。如果禁用，管理员级别以下的用户对卷只有只读访问权限。 |

## 变更窗口设置

此设置允许您指定一个时间窗口，在此窗口内可以应用对应用程序的[GitOps更新](../stacks/add.md#gitops-updates)。

如果启用此设置并在窗口外对应用程序进行更新，则不会应用该更新。

<figure><img src="../..//assets/2.19-kubernetes-cluster-setup-changewindow.png" alt=""><figcaption></figcaption></figure>

## Docker安全设置

此部分允许您切换环境的各类Docker相关安全设置。

<figure><img src="../..//assets/2.15-docker_hosts_security_settings.png" alt=""><figcaption></figcaption></figure>

| 选项                                                | 概述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 禁用非管理员的绑定挂载            | 阻止Portainer中的非管理员用户在创建容器和/或服务/堆栈时使用绑定挂载。启用后，将移除附加到主机文件系统路径的选项。                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 禁用非管理员的特权模式        | 阻止非管理员用户提升容器权限以绕过SELinux/AppArmor。启用后，在[添加容器](../containers/add.md)时将移除**特权**模式选项。                                                                                                                                                                                                                                                                                                                                                                                                      |
| 禁用非管理员使用主机PID 1  | 阻止非管理员用户请求部署的容器作为主机PID运行。如果被不可信授权用户使用，这是一个安全风险，因为当他们作为PID1运行时，实际上能够在容器控制台中以root身份在主机上运行任何命令。                                                                                                                                                                                                                                                                                                                               |
| 禁用非管理员使用堆栈      | 这是一种"大锤"方法，用于消除Portainer中非管理员用户发现和利用Docker架构弱点的任何可能性。虽然Portainer有能力禁用一些更常见的漏洞利用，但我们不可能全部阻止，因为可以向容器添加任意数量的功能来尝试获取主机访问权限。此功能只是允许管理员禁用所有可能的入口点。                                                                                                                                                                                                                  |
| 禁用非管理员的设备映射        | 阻止用户将主机设备映射到容器中。虽然映射设备的能力通常用于好的方面(例如将GPU映射到容器中)，但它同样可以被不可信的授权用户用来将物理存储设备映射到容器中。可以将`/dev/sda1`挂载到容器中，然后从该容器的控制台，用户将不受限制地完全访问sda1设备。通过启用此选项，Portainer阻止非管理员将任何设备映射到容器中。 |
| 禁用非管理员的容器能力 | 启用后，非管理员在[添加容器](../containers/add.md)时将隐藏**容器能力**选项卡。                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 禁用非管理员的sysctl设置        | 启用后阻止非管理员用户使用sysctl选项，防止他们重新创建、复制或编辑容器。                                                                                                                                                                                                                                                                                                                                                                                                                            |

## 其他

此部分包含其他各类环境特定设置。

<figure><img src="../..//assets/2.18-swarm-setup-other.png" alt=""><figcaption></figcaption></figure>

| 选项                                                                    | 概述                                                                                                                                                                                                               |
| ------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 在UI中显示GPU                                                        | GPU功能目前在Docker Swarm环境中不可用，因此此切换被禁用。                                                                                                                  |
| 为堆栈、服务和容器显示镜像更新指示器 | <p>启用可为该环境开启[新镜像通知](../services/)功能。禁用则关闭该功能。<br><br>此功能仅在Portainer商业版中可用。</p> |
